<!doctype html>
<head>
<meta charset="utf-8">
<script src="/socket.io/socket.io.js"></script>
 <script src="/javascripts/jquery-1.11.3.min.js"></script>
<title>Node Box</title>


</head>
<body>
status: <a id="status">not connected</a>
<a id="messages"></a>

<form>><input id="send" size=100 autocomplete="off" autofocus  /></form>



<script>
var socket=io();
var nickname;

socket.on('connect',function(){

	//connected
	$('#status').html('you are now connected');
	nickname=prompt('what is your nickname?');
	socket.emit('new user',nickname);

	//send message
	$('form').submit(function(event){
	socket.emit('message',$('#send').val())
	$("#send").val("");
	event.preventDefault();

	});


	//incoming message
	socket.on('message',function(msg){
	console.log(msg.username+":"+msg.message);
	$('#messages').append($('<ul>').text(msg.username+":"+msg.message));
	});


});
socket.on('disconnect',function(){
	$('#status').html('you are now disconnected');
});



</script>

</body>
</html>
